考虑**最终结果**的特点，一定能分为左右两段，左段是降序，右段是升序。
例如 43215678

数组元素是**确定的**，只要知道哪些元素是降序，移到数组最左边，即为最终结果

更新区间的标记，使用线段树，多次打标记如何merge？

- 标记降序时一定是右侧升序段的最小几个数
- 标记升序时一定是左侧降序段的最大几个数

所以线段树每个节点记录的sum值应该为该段含有的降序元素个数